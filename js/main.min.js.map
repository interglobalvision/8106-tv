{"version":3,"sources":["main.js"],"names":["basicAnimationSpeed","fastAnimationSpeed","Twitter","tweetsWidth","undefined","animation","$twitterFeed","$","$holder","init","_this","this","tweets","first","clone","appendTo","width","startAnimation","bind","on","mouseenter.twitterHover","stopAnimation","mouseleave.twitterHover","unbind","off","setInterval","left","parseInt","css","clearInterval","Menu","click.nav-trigger","target","data","click","slideToggle","closeBelowMenu","slideUp","Ajaxy","siteURL","top","location","host","toString","$ajaxyLinks","event","preventDefault","url","currentTarget","href","ajaxLoad","document","ready","window","onpopstate","origin","pathname","reset","ajax","beforeSend","ajaxBefore","dataType","error","jqXHR","textStatus","ajaxErrorHandler","success","ajaxSuccess","complete","ajaxAfter","addClass","animate","scrollTop","removeClass","alert","console","log","respHtml","createElement","innerHTML","$bodyClasses","attr","$content","$title","text","history","pushState","title","html","removeAttr","jQuery","each","string","replace","e","hasClass"],"mappings":"AAGA,GAAIA,qBAAsB,IACtBC,mBAAqBD,oBAAsB,EAE3CE,SACFC,YAAaC,OACbC,UAAWD,OACXE,aAAcC,EAAE,iBAChBC,QAASD,EAAE,2BACXE,KAAM,WACJ,GAAIC,GAAQC,KACRC,EAASL,EAAE,oBAAoBM,OAGnCD,GAAOE,QAAQC,SAAS,2BAGxBL,EAAMP,YAAcS,EAAOI,QAG3BN,EAAMO,iBAGNP,EAAMQ,QAGRA,KAAM,WACJ,GAAIR,GAAQC,IAEZD,GAAMJ,aAAaa,IACjBC,0BAA2B,WACzBV,EAAMW,iBAGRC,0BAA2B,WACzBZ,EAAMO,qBAMZM,OAAQ,WAENZ,KAAKL,aAAakB,IAAI,kBAIxBP,eAAgB,WACd,GAAIP,GAAQC,IAEZ,OAAOD,GAAML,UAAYoB,YAAY,WAEnC,GAAIC,GAAOC,SAASjB,EAAMF,QAAQoB,IAAI,QAElCF,IAAShB,EAAMP,YACjBO,EAAMF,QAAQoB,IAAI,OAAQ,OAE1BlB,EAAMF,QAAQoB,IAAI,OAASF,EAAO,EAAK,OAGxC,KAILL,cAAe,WAEb,MAAOQ,eAAclB,KAAKN,aAK1ByB,MACFrB,KAAM,WAEJE,KAAKO,QAIPA,KAAM,WACJ,GAAIR,GAAQC,IAEZ,OAAOJ,GAAE,mBAAmBY,IAC1BY,oBAAqB,WACnB,GAAIC,GAASzB,EAAEI,MAAMsB,KAAK,aAE1BvB,GAAMwB,MAAMF,OAMlBT,OAAQ,WAEN,MAAOhB,GAAE,mBAAmBiB,IAAI,sBAIlCU,MAAO,SAASF,GAEd,MAAOzB,GAAE,WAAayB,GAAQG,YAAYnC,sBAI5CoC,eAAgB,WAGd,MAAO7B,GAAE,sDAAsD8B,QAAQrC,sBAM3EsC,QACE7B,KAAM,WACJ,GAAIC,GAAQC,KAER4B,EAAU,UAAYC,IAAIC,SAASC,KAAKC,UAE5CjC,GAAMkC,YAAcrC,EAAE,YAAcgC,EAAU,iEAI9C7B,EAAMkC,YAAYV,MAAM,SAASW,GAC/BA,EAAMC,gBAEN,IAAIC,GAAMF,EAAMG,cAAcC,IAE9BvC,GAAMwC,SAASH,KAIjBxC,EAAE4C,UAAUC,MAAO,WAEjBC,OAAOC,WAAa,WAClB5C,EAAMwC,SAASC,SAASV,SAASc,OAASJ,SAASV,SAASe,cAKlEC,MAAO,WACL,GAAI/C,GAAQC,IAGZD,GAAMkC,YAAYrB,OAAO,SAGzBb,EAAMD,QAGRyC,SAAU,SAASH,GACjB,GAAIrC,GAAQC,IAEZJ,GAAEmD,KAAKX,GACLY,WAAY,WACVjD,EAAMkD,cAGRC,SAAU,OACVC,MAAO,SAASC,EAAOC,GACrBtD,EAAMuD,iBAAiBF,EAAOC,IAGhCE,QAAS,SAASjC,GAChBvB,EAAMyD,YAAYlC,EAAMc,IAG1BqB,SAAU,WACR1D,EAAM2D,gBAKZT,WAAY,WAGVrD,EAAE,QAAQ+D,SAAS,WACnB/D,EAAE,cAAcgE,SACdC,UAAW,GACVvE,qBAGLoE,UAAW,WACT,GAAI3D,GAAQC,IAEZJ,GAAE,QAAQkE,YAAY,WAEtB/D,EAAM+C,QAGNvD,QAAQO,QAIVwD,iBAAkB,SAASF,EAAOC,GAChCU,MAAMV,GACNW,QAAQC,IAAIb,IAGdI,YAAa,SAASlC,EAAKc,GAGzB,GAAI8B,GAAW1B,SAAS2B,cAAc,OAEtCD,GAASE,UAAY9C,CAGrB,IAAI+C,GAAezE,EAAE,OAAQsE,GAAUI,KAAK,SACxCC,EAAW3E,EAAE,gBAAiBsE,GAC9BM,EAAS5E,EAAE,QAASsE,GAAUO,MAGlCC,SAAQC,UAAU,KAAMH,EAAQpC,GAChCI,SAASoC,MAAQJ,EAGjB5E,EAAE,iBAAiBiF,KAAKN,EAASM,QACjCjF,EAAE,QAAQkF,WAAW,SAASnB,SAASU,EAAe,cAK1DU,OAAOvC,UAAUC,MAAM,WACrB,YAGA7C,GAAE,kBAAkBoF,KAAK,WACvB,GAAIC,GAASrF,EAAEI,MAAM6E,MAErBI,GAASA,EAAOC,QAAQ,YAAY,YACpCtF,EAAEI,MAAM6E,KAAKI,KAGf1F,QAAQO,OACRqB,KAAKrB,OAEL6B,MAAM7B,KAAK,wDAGXF,EAAE,eAAeY,IACfe,MAAO,SAAS4D,GACd,GAAIpF,GAAQH,EAAEI,KAEVD,GAAMqF,SAAS,kBAIjBD,EAAEhD,iBACFvC,EAAE,uBAAuBkE,YAAY,YACrC/D,EAAM4D,SAAS","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr, Ajaxy */\n\nvar basicAnimationSpeed = 800;\nvar fastAnimationSpeed = basicAnimationSpeed / 2;\n\nvar Twitter = {\n  tweetsWidth: undefined,\n  animation: undefined,\n  $twitterFeed: $('#twitter-feed'),\n  $holder: $('#twitter-marquee-holder'),\n  init: function() {\n    var _this = this;\n    var tweets = $('.twitter-marquee').first();\n\n    // clone tweets to avoid blank space\n    tweets.clone().appendTo('#twitter-marquee-holder');\n\n    // set width for animation\n    _this.tweetsWidth = tweets.width();\n\n    // setup animation\n    _this.startAnimation();\n\n    // bind hovers\n    _this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$twitterFeed.on({\n      'mouseenter.twitterHover': function() {\n        _this.stopAnimation();\n      },\n\n      'mouseleave.twitterHover': function() {\n        _this.startAnimation();\n      },\n    });\n\n  },\n\n  unbind: function() {\n\n    this.$twitterFeed.off('.twitterHover');\n\n  },\n\n  startAnimation: function() {\n    var _this = this;\n\n    return _this.animation = setInterval(function() {\n\n      var left = parseInt(_this.$holder.css('left'));\n\n      if (left < - _this.tweetsWidth) {\n        _this.$holder.css('left', '0px');\n      } else {\n        _this.$holder.css('left', (left - 1) + 'px');\n      }\n\n    }, 25);\n\n  },\n\n  stopAnimation: function() {\n\n    return clearInterval(this.animation);\n\n  },\n};\n\nvar Menu = {\n  init: function() {\n\n    this.bind();\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    return $('.js-nav-trigger').on({\n      'click.nav-trigger': function() {\n        var target = $(this).data('nav-target');\n\n        _this.click(target);\n      },\n    });\n\n  },\n\n  unbind: function() {\n\n    return $('.js-nav-trigger').off('click.nav-trigger');\n\n  },\n\n  click: function(target) {\n\n    return $('#drawer-' + target).slideToggle(basicAnimationSpeed);\n\n  },\n\n  closeBelowMenu: function() {\n    // for after AJAX loads or clicks?\n\n    return $('#drawer-search, #drawer-follow, #drawer-categorias').slideUp(basicAnimationSpeed);\n\n  },\n};\n\n// AJAX\nAjaxy = {\n  init: function() {\n    var _this = this;\n    \n    var siteURL = \"http://\" + top.location.host.toString();\n\n    _this.$ajaxyLinks = $(\"a[href^='\" + siteURL + \"'], a[href^='/'], a[href^='./'], a[href^='../'], a[href^='#']\");\n    //_this.$elementsToHide = $('.nav, #main-container, #three-scene');\n\n    // Find all ajaxy links and bind ajax event\n    _this.$ajaxyLinks.click(function(event) {\n      event.preventDefault();\n\n      var url = event.currentTarget.href;\n\n      _this.ajaxLoad(url);\n\n    });\n\n    $(document).ready( function() {\n      // For back button\n      window.onpopstate = function() {\n        _this.ajaxLoad(document.location.origin + document.location.pathname);\n      };\n    });\n  },\n\n  reset: function() {\n    var _this = this;\n\n    // Unbind click from all ajax links\n    _this.$ajaxyLinks.unbind('click');\n\n    // Re initiate\n    _this.init();\n  },\n\n  ajaxLoad: function(url) {\n    var _this = this;\n\n    $.ajax(url, {\n      beforeSend: function() {\n        _this.ajaxBefore();\n      },\n\n      dataType: 'html',\n      error: function(jqXHR, textStatus) {\n        _this.ajaxErrorHandler(jqXHR, textStatus);\n      },\n\n      success: function(data) {\n        _this.ajaxSuccess(data, url);\n      },\n\n      complete: function() {\n        _this.ajaxAfter();\n      },\n    });\n  },\n\n  ajaxBefore: function() {\n    var _this = this;\n\n    $('body').addClass('loading');\n    $('body, html').animate({\n      scrollTop: 0,\n    }, fastAnimationSpeed);\n  },\n\n  ajaxAfter: function() {\n    var _this = this;\n\n    $('body').removeClass('loading');\n\n    _this.reset();\n\n    // Resets from other parts of the website\n    Twitter.init();\n\n  },\n\n  ajaxErrorHandler: function(jqXHR, textStatus) {\n    alert(textStatus);\n    console.log(jqXHR);\n  },\n\n  ajaxSuccess: function(data,url) {\n\n    // Convert data into proper html to be able to fully parse thru jQuery\n    var respHtml = document.createElement('html');\n\n    respHtml.innerHTML = data;\n\n    // Get changes: body classes, page title, main content, header\n    var $bodyClasses = $('body', respHtml).attr('class');\n    var $content = $('#main-content', respHtml);\n    var $title = $('title', respHtml).text();\n\n    // Push new history state and update title\n    history.pushState(null, $title, url);\n    document.title = $title;\n\n    // Update with new content and classes\n    $('#main-content').html($content.html());\n    $('body').removeAttr('class').addClass($bodyClasses + ' loading');\n\n  },\n};\n\njQuery(document).ready(function () {\n  'use strict';\n\n  // utility class mainly for use on headines to avoid widows [single words on a new line]\n  $('.js-fix-widows').each(function(){\n    var string = $(this).html();\n\n    string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n    $(this).html(string);\n  });\n\n  Twitter.init();\n  Menu.init();\n\n  Ajaxy.init('#drawer-categorias-list a, #footer-categorias-list a');\n\n  // ver mas link on homepage\n  $('#more-posts').on({\n    click: function(e) {\n      var _this = $(this);\n\n      if (_this.hasClass('js-next-page')) {\n        debugger;\n        // trigger ajax page load? or?\n      } else {\n        e.preventDefault();\n        $('.feed-post.u-hidden').removeClass('u-hidden');\n        _this.addClass('js-next-page');\n      }\n    },\n  });\n\n});\n\n"],"sourceRoot":"/source/"}